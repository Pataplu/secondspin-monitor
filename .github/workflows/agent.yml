import time
import json
from pathlib import Path

STATE_FILE = Path("state.json")
LOCK_FILE = Path("last_run.txt")
MIN_INTERVAL = 15 * 60  # 15 minuten
now = int(time.time())

# 15-min guard
if LOCK_FILE.exists():
    last = int(LOCK_FILE.read_text())
    if now - last < MIN_INTERVAL:
        print("Skip: <15 min")
        exit(0)

LOCK_FILE.write_text(str(now))

# state.json laden of aanmaken
if STATE_FILE.exists():
    state = json.loads(STATE_FILE.read_text())
else:
    state = {}

# === HIER JOUW ECHTE AGENT-LOGICA ===
state["last_run"] = now
state["example"] = "agent ran"

STATE_FILE.write_text(json.dumps(state, indent=2))
print("Agent done")
